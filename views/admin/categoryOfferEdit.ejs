<%- include('./header.ejs') %>
<%- include('./sidePannel.ejs') %>   
<main class="main-wrap">
  
 <div style="padding-top: 2%;">
    <h1 style="margin-left: 30%; margin-bottom: 3%;"><%= category.name.toUpperCase() %></h1>
                                  
    <form id="offerForm" action="/admin/categoryOfferEdit/<%= category._id %>" method="post">
        <!-- Offer Percentage -->
        <div class="row mb-4">
            <label class="col-lg-3 col-form-label">Offer Percentage*</label>
            <div class="col-lg-9">
                <input type="number" class="form-control" placeholder="Enter offer percentage (0-100)" name="discount" id="offerPercentage" min="0" max="100" value="<%= category.discount %>" required>
                <small class="form-text text-muted">Offer percentage must be between 0 and 100%</small>
                <span id="percentageError" class="error-message text-danger" style="display: none;"></span>
            </div>
        </div>
        
        <button class="btn btn-primary" type="submit">Add/Update Offer</button>
    </form>

    <script>
        document.getElementById('offerForm').addEventListener('submit', function (event) {
          

            // Get form inputs
            const offerPercentage = document.getElementById('offerPercentage');
            const percentageError = document.getElementById('percentageError');

            // Reset error messages
            percentageError.style.display = 'none';
            let valid = true;

            // Validate offer percentage (0 to 100)
            if (offerPercentage.value < 0 || offerPercentage.value > 100) {
                percentageError.textContent = 'Offer percentage must be between 0 and 100';
                percentageError.style.display = 'block';
                valid = false;
            }

            // If validation fails, prevent form submission
            if (!valid) {
                event.preventDefault();
            }
        });
    </script>

 </div> 
</main>

<script src="/admin/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/admin/js/vendors/bootstrap.bundle.min.js"></script>
<script src="/admin/js/vendors/select2.min.js"></script>
<script src="/admin/js/vendors/perfect-scrollbar.js"></script>
<script src="/admin/js/vendors/jquery.fullscreen.min.js"></script>
<script src="/admin/js/vendors/chart.js"></script>
<script src="/admin/js/main.js" type="text/javascript"></script>
<script src="/admin/js/custom-chart.js" type="text/javascript"></script>
</body>
</html>
